(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{5056:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/main-game-page",function(){return n(7396)}])},7328:(e,t,n)=>{e.exports=n(9836)},7396:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var s=n(7876),a=n(7328),o=n.n(a),i=n(4232),l=n(9677),r=n.n(l),c=n(1949),u=n(9099),d=n(2749);function m(){let{isSoundOn:e,toggleSound:t}=(0,d.J)(),[n,a]=(0,i.useState)(""),[l,m]=(0,i.useState)("Привет! Давай поиграем в игру."),[_,p]=(0,i.useState)(0),[g,h]=(0,i.useState)([]),[x,f]=(0,i.useState)(""),[j,w]=(0,i.useState)(""),[v,B]=(0,i.useState)(null),[N,k]=(0,i.useState)("greeting"),[S,C]=(0,i.useState)(!0),[G,b]=(0,i.useState)("/sans-idle.gif"),E=(0,i.useRef)(null),q=(0,u.useRouter)(),[A,{stop:I}]=(0,c.A)("/voice.mp3",{volume:.5*!!e,loop:!0}),[y]=(0,c.A)("/click.mp3",{volume:+!!e});(0,i.useEffect)(()=>{fetch("/undertaleQuestions.json").then(e=>e.json()).then(e=>h(e))},[]),(0,i.useEffect)(()=>{if(S){e&&A();let t=0;a("");let n=setInterval(()=>{t<=l.length?(a(l.slice(0,t)),t++):(clearInterval(n),C(!1))},30);return()=>{I(),clearInterval(n)}}},[l,S,e]);let F=()=>{if(b("/sans-idle.gif"),"greeting"===N){var e;k("question"),m((null==(e=g[_])?void 0:e.question)||""),C(!0)}else"feedback"===N&&(_<g.length-1?(p(_+1),k("question"),m(g[_+1].question),C(!0),w(""),f(""),B(null)):(k("end"),b("/sans-win.gif"),m("Спасибо за игру! Вы стали настоящими профи в Андертейл!"),C(!0)))},O=e=>{y();let t=g[_].correctAnswer,n=e===t?"Правильно!":"Неправильно! Правильный ответ: ".concat(t);B(e===t),w(n),m(n),e===t?b("/sans-right.gif"):b("/sans-wrong.gif"),setTimeout(()=>{b("/sans-idle.gif")},3e3),k("feedback"),C(!0)},P=()=>{y();let e=g[_].correctAnswer[0],t=g[_].correctAnswer.map(e=>e.replace(/\s+/g,"").toLowerCase()),n=x.replace(/\s+/g,"").toLowerCase(),s=t.includes(n)?"Правильно!":"Неправильно! Правильный ответ: ".concat(e);B(t.includes(n)),w(s),m(s),t.includes(n)?b("/sans-right.gif"):b("/sans-wrong.gif"),k("feedback"),C(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:"Викторина"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)("div",{className:r().page,children:(0,s.jsxs)("main",{className:r().main,children:[(0,s.jsxs)("div",{className:r().header,children:[(0,s.jsx)("button",{onClick:()=>{q.push("/")},className:r().homeButton,children:(0,s.jsx)("img",{src:"/home.png",alt:"Home"})}),(0,s.jsx)("button",{onClick:t,className:r().soundButton,children:(0,s.jsx)("img",{src:e?"/volumeOn.png":"/volumeOff.png",alt:"Sound"})})]}),(0,s.jsx)("img",{className:"".concat(r().sans," ").concat(!0===v?r().greenBorder:!1===v?r().redBorder:""),src:G,alt:"loading..."}),(0,s.jsx)("div",{className:r().textBox,onClick:()=>{S?(C(!1),a(l)):F()},ref:E,children:(0,s.jsx)("p",{children:n})}),"question"===N&&g.length>0&&_<g.length&&(0,s.jsx)(s.Fragment,{children:"options"===g[_].type?(0,s.jsx)("div",{className:r().options,children:g[_].options.map((e,t)=>(0,s.jsx)("button",{className:r().option,onClick:()=>O(e),children:e},t))}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",value:x,onChange:e=>f(e.target.value),placeholder:"Введите ваш ответ",className:r().input,onKeyDown:e=>{"Enter"===e.key&&P()}}),(0,s.jsx)("button",{className:r().answerButton,onClick:P,children:"Ответить"})]})})]})})]})}},9099:(e,t,n)=>{e.exports=n(8253)},9677:e=>{e.exports={page:"Game_page__CqOy1",main:"Game_main__5QVi9",sans:"Game_sans__a1FSJ",textBox:"Game_textBox__kFhIH",options:"Game_options__4K6B1",input:"Game_input__7_XA_",option:"Game_option__Nmgsi",answerButton:"Game_answerButton__lZpZ4",homeButton:"Game_homeButton__epZQI",soundButton:"Game_soundButton__IB2dN",soundButt:"Game_soundButt__ofPwk"}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(5056)),_N_E=e.O()}]);